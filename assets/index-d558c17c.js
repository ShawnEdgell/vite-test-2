(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function c(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(e){if(e.ep)return;e.ep=!0;const n=c(e);fetch(e.href,n)}})();document.addEventListener("DOMContentLoaded",function(){const a=document.getElementById("todoInput"),d=document.getElementById("addTodo"),c=document.getElementById("todoList"),l=document.getElementById("priorityInput");m();function e(){a.value.trim()!==""&&(n({id:Date.now(),text:a.value.trim(),priority:l.value,date:new Date(Date.now()).toLocaleDateString()}),a.value="",r())}d.addEventListener("click",e),d.addEventListener("touchstart",e),a.addEventListener("keyup",function(o){o.key==="Enter"&&e()});function n(o){const t=document.createElement("li");switch(t.classList.add("list-group-item","d-flex","justify-content-between","align-items-center","task"),o.priority){case"high":t.classList.add("priority-high");break;case"medium":t.classList.add("priority-medium");break;case"low":t.classList.add("priority-low");break}t.setAttribute("data-id",o.id),t.innerHTML=`
      <div class="d-flex align-items-center w-100">
        <span class="todo-label flex-grow-1">${o.text}</span>
        <div class="d-flex align-items-center ml-auto"> <!-- Use ml-auto to push content to the right -->
          <small>${o.date}</small>
          <button class="btn btn-primary btn-sm ml-1 edit-btn">Edit</button>
          <button class="btn btn-danger btn-sm ml-1 delete-btn">X</button>
        </div>
      </div>`,c.appendChild(t)}c.addEventListener("click",function(o){const t=o.target.closest(".task");if(t&&(o.target.classList.contains("delete-btn")&&(t.remove(),r()),o.target.classList.contains("edit-btn"))){const i=t.querySelector(".todo-label"),s=document.createElement("input");s.classList.add("form-control"),s.value=i.textContent;const u=o.target;u.textContent==="Edit"&&(i.classList.add("d-none"),i.style.maxWidth="none",s.style.width="100%",s.addEventListener("keyup",function(f){f.key==="Enter"&&(i.textContent=s.value,i.classList.remove("d-none"),i.style.maxWidth="calc(100% - 90px)",s.remove(),u.textContent="Edit",r())}),t.insertBefore(s,t.childNodes[0]),s.focus(),u.textContent="Save")}});function r(){const o=[];Array.from(c.children).forEach(t=>{let i;t.classList.contains("priority-high")?i="high":t.classList.contains("priority-medium")?i="medium":t.classList.contains("priority-low")&&(i="low"),o.push({id:t.getAttribute("data-id"),text:t.querySelector(".todo-label").textContent,date:t.querySelector("small").textContent,priority:i})}),localStorage.setItem("todos",JSON.stringify(o))}function m(){const o=JSON.parse(localStorage.getItem("todos"));o&&o.forEach(t=>n(t))}});
